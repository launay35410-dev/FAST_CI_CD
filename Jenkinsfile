pipeline { agent { docker { image 'cypress/included:13.17.0' args '--entrypoint="" --shm-size=2g' } } stages { stage('Checkout') { steps { echo "ğŸ“¥ RÃ©cupÃ©ration du code..." checkout scm sh "ls -l" } } stage('Install dependencies') { steps { echo "ğŸ“¦ Installation des dÃ©pendances..." sh "npm ci" } } stage('Run Cypress tests - Multi Browsers') { parallel { stage('Chrome') { steps { sh 'npx cypress run --browser chrome --reporter junit --reporter-options "mochaFile=reports/junit/test-results-chrome.xml,toConsole=true"' } } stage('Edge') { steps { sh 'npx cypress run --browser edge --reporter junit --reporter-options "mochaFile=reports/junit/test-results-edge.xml,toConsole=true"' } } stage('Firefox') { steps { sh 'npx cypress run --browser firefox --reporter junit --reporter-options "mochaFile=reports/junit/test-results-firefox.xml,toConsole=true"' } } } } } post { always { echo "ğŸ“ Archivage des artefacts..." archiveArtifacts artifacts: 'cypress/videos/**, cypress/screenshots/**, reports/junit/*.xml, mochawesome-report/*', allowEmptyArchive: true junit 'reports/junit/*.xml' } } }